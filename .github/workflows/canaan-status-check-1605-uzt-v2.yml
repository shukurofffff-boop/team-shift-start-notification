name: Canaan Status Check 16:05 UZT (v2)

on:
  schedule:
    # 16:05 UZT (UTC+5) = 11:05 UTC, Mon–Fri
    - cron: "5 11 * * 1-5"
  workflow_dispatch: {}

jobs:
  status-check:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    env:
      # Telegram
      TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
      TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

      # Zendesk
      ZENDESK_EMAIL: ${{ secrets.ZENDESK_EMAIL }}
      ZENDESK_API_TOKEN: ${{ secrets.ZENDESK_API_TOKEN }}
      ZENDESK_SUBDOMAIN: "rainpointonline"

      # AVOXI (Genius cluster)
      AVOXI_API_TOKEN: ${{ secrets.AVOXI_API_TOKEN }}
      AVOXI_BASE_URL: "https://genius.avoxi.com/api/v2"

      # Zendesk “online” heuristic window in minutes
      ZENDESK_ONLINE_WINDOW_MINUTES: "180"

    steps:
      - name: Install jq
        shell: bash
        run: |
          set -e
          sudo apt-get update -y
          sudo apt-get install -y jq

      - name: Check Zendesk + AVOXI and noti
